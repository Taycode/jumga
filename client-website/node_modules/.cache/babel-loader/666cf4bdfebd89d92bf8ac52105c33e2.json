{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/components/SettingsSection.js\";\nimport React, { useState } from \"react\";\nimport Section from \"./Section\";\nimport ReauthModal from \"./ReauthModal\";\nimport SettingsNav from \"./SettingsNav\";\nimport Container from \"react-bootstrap/Container\";\nimport FormAlert from \"./FormAlert\";\nimport SettingsGeneral from \"./SettingsGeneral\";\nimport SettingsPassword from \"./SettingsPassword\";\nimport SettingsBilling from \"./SettingsBilling\";\nimport { useAuth } from \"./../util/auth.js\";\n\nfunction SettingsSection(props) {\n  const auth = useAuth();\n  const [formAlert, setFormAlert] = useState(null); // State to control whether we show a re-authentication flow\n  // Required by some security sensitive actions, such as changing password.\n\n  const [reauthState, setReauthState] = useState({\n    show: false\n  });\n  const validSections = {\n    general: true,\n    password: true,\n    billing: true\n  };\n  const section = validSections[props.section] ? props.section : \"general\"; // Handle status of type \"success\", \"error\", or \"requires-recent-login\"\n  // We don't treat \"requires-recent-login\" as an error as we handle it\n  // gracefully by taking the user through a re-authentication flow.\n\n  const handleStatus = ({\n    type,\n    message,\n    callback\n  }) => {\n    if (type === \"requires-recent-login\") {\n      // First clear any existing message\n      setFormAlert(null); // Then update state to show re-authentication modal\n\n      setReauthState({\n        show: true,\n        // Failed action to try again after reauth\n        callback: callback\n      });\n    } else {\n      // Display message to user (type is success or error)\n      setFormAlert({\n        type: type,\n        message: message\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Section, {\n    bg: props.bg,\n    textColor: props.textColor,\n    size: props.size,\n    bgImage: props.bgImage,\n    bgImageOpacity: props.bgImageOpacity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, reauthState.show && /*#__PURE__*/React.createElement(ReauthModal, {\n    callback: reauthState.callback,\n    provider: auth.user.providers[0],\n    onDone: () => setReauthState({\n      show: false\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(SettingsNav, {\n    activeKey: section,\n    className: \"justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    className: \"mt-5\",\n    style: {\n      maxWidth: \"450px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, formAlert && /*#__PURE__*/React.createElement(FormAlert, {\n    type: formAlert.type,\n    message: formAlert.message,\n    className: \"mx-auto mb-4\",\n    style: {\n      maxWidth: \"450px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }), section === \"general\" && /*#__PURE__*/React.createElement(SettingsGeneral, {\n    onStatus: handleStatus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 35\n    }\n  }), section === \"password\" && /*#__PURE__*/React.createElement(SettingsPassword, {\n    onStatus: handleStatus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 36\n    }\n  }), section === \"billing\" && /*#__PURE__*/React.createElement(SettingsBilling, {\n    onStatus: handleStatus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 35\n    }\n  })));\n}\n\nexport default SettingsSection;","map":{"version":3,"sources":["/usr/src/app/src/components/SettingsSection.js"],"names":["React","useState","Section","ReauthModal","SettingsNav","Container","FormAlert","SettingsGeneral","SettingsPassword","SettingsBilling","useAuth","SettingsSection","props","auth","formAlert","setFormAlert","reauthState","setReauthState","show","validSections","general","password","billing","section","handleStatus","type","message","callback","bg","textColor","size","bgImage","bgImageOpacity","user","providers","maxWidth"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Section from \"./Section\";\nimport ReauthModal from \"./ReauthModal\";\nimport SettingsNav from \"./SettingsNav\";\nimport Container from \"react-bootstrap/Container\";\nimport FormAlert from \"./FormAlert\";\nimport SettingsGeneral from \"./SettingsGeneral\";\nimport SettingsPassword from \"./SettingsPassword\";\nimport SettingsBilling from \"./SettingsBilling\";\nimport { useAuth } from \"./../util/auth.js\";\n\nfunction SettingsSection(props) {\n  const auth = useAuth();\n  const [formAlert, setFormAlert] = useState(null);\n\n  // State to control whether we show a re-authentication flow\n  // Required by some security sensitive actions, such as changing password.\n  const [reauthState, setReauthState] = useState({\n    show: false,\n  });\n\n  const validSections = {\n    general: true,\n    password: true,\n    billing: true,\n  };\n\n  const section = validSections[props.section] ? props.section : \"general\";\n\n  // Handle status of type \"success\", \"error\", or \"requires-recent-login\"\n  // We don't treat \"requires-recent-login\" as an error as we handle it\n  // gracefully by taking the user through a re-authentication flow.\n  const handleStatus = ({ type, message, callback }) => {\n    if (type === \"requires-recent-login\") {\n      // First clear any existing message\n      setFormAlert(null);\n      // Then update state to show re-authentication modal\n      setReauthState({\n        show: true,\n        // Failed action to try again after reauth\n        callback: callback,\n      });\n    } else {\n      // Display message to user (type is success or error)\n      setFormAlert({\n        type: type,\n        message: message,\n      });\n    }\n  };\n\n  return (\n    <Section\n      bg={props.bg}\n      textColor={props.textColor}\n      size={props.size}\n      bgImage={props.bgImage}\n      bgImageOpacity={props.bgImageOpacity}\n    >\n      {reauthState.show && (\n        <ReauthModal\n          callback={reauthState.callback}\n          provider={auth.user.providers[0]}\n          onDone={() => setReauthState({ show: false })}\n        />\n      )}\n\n      <SettingsNav activeKey={section} className=\"justify-content-center\" />\n      <Container\n        className=\"mt-5\"\n        style={{\n          maxWidth: \"450px\",\n        }}\n      >\n        {formAlert && (\n          <FormAlert\n            type={formAlert.type}\n            message={formAlert.message}\n            className=\"mx-auto mb-4\"\n            style={{ maxWidth: \"450px\" }}\n          />\n        )}\n\n        {section === \"general\" && <SettingsGeneral onStatus={handleStatus} />}\n\n        {section === \"password\" && <SettingsPassword onStatus={handleStatus} />}\n\n        {section === \"billing\" && <SettingsBilling onStatus={handleStatus} />}\n      </Container>\n    </Section>\n  );\n}\n\nexport default SettingsSection;\n"]},"metadata":{},"sourceType":"module"}