{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/components/AuthSocial.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport Badge from \"react-bootstrap/Badge\";\nimport { useAuth } from \"./../util/auth.js\";\nimport \"./AuthSocial.scss\";\n\nfunction AuthSocial(props) {\n  const auth = useAuth();\n  const [pending, setPending] = useState(null);\n  const [lastUsed, setLastUsed] = useState(null);\n  const providerDisplayNames = {\n    google: \"Google\",\n    facebook: \"Facebook\",\n    twitter: \"Twitter\",\n    github: \"GitHub\"\n  };\n\n  const onSigninWithProvider = provider => {\n    setPending(provider);\n    auth.signinWithProvider(provider).then(user => {\n      localStorage.setItem(\"lastUsedAuthProvider\", provider);\n      props.onAuth(user);\n    }).catch(error => {\n      props.onError(error.message);\n    }).finally(() => {\n      setPending(null);\n    });\n  }; // Get value of last used auth provider\n\n\n  useEffect(() => {\n    if (props.showLastUsed) {\n      const lastUsed = window.localStorage.getItem(\"lastUsedAuthProvider\");\n\n      if (lastUsed) {\n        setLastUsed(lastUsed);\n      }\n    }\n  }, [props.showLastUsed]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, props.providers.map(provider => /*#__PURE__*/React.createElement(Button, {\n    variant: \"light\",\n    size: props.inputSize,\n    block: true,\n    onClick: () => {\n      onSigninWithProvider(provider);\n    },\n    className: \"position-relative\",\n    key: provider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"AuthSocial__icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `https://uploads.divjoy.com/icon-${provider}.svg`,\n    alt: providerDisplayNames[provider],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  })), pending !== provider && /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, props.buttonText, \" with \", providerDisplayNames[provider]), pending === provider && /*#__PURE__*/React.createElement(Spinner, {\n    animation: \"border\",\n    size: \"sm\",\n    role: \"status\",\n    \"aria-hidden\": true,\n    className: \"align-baseline text-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, \"Loading...\")), provider === lastUsed && /*#__PURE__*/React.createElement(Badge, {\n    variant: \"warning\",\n    className: \"position-absolute font-weight-normal\",\n    style: {\n      top: \"-6px\",\n      right: \"-6px\",\n      opacity: 0.7\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"Last used\"))));\n}\n\nexport default AuthSocial;","map":{"version":3,"sources":["/usr/src/app/src/components/AuthSocial.js"],"names":["React","useEffect","useState","Button","Spinner","Badge","useAuth","AuthSocial","props","auth","pending","setPending","lastUsed","setLastUsed","providerDisplayNames","google","facebook","twitter","github","onSigninWithProvider","provider","signinWithProvider","then","user","localStorage","setItem","onAuth","catch","error","onError","message","finally","showLastUsed","window","getItem","providers","map","inputSize","buttonText","top","right","opacity"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Spinner from \"react-bootstrap/Spinner\";\nimport Badge from \"react-bootstrap/Badge\";\nimport { useAuth } from \"./../util/auth.js\";\nimport \"./AuthSocial.scss\";\n\nfunction AuthSocial(props) {\n  const auth = useAuth();\n  const [pending, setPending] = useState(null);\n  const [lastUsed, setLastUsed] = useState(null);\n\n  const providerDisplayNames = {\n    google: \"Google\",\n    facebook: \"Facebook\",\n    twitter: \"Twitter\",\n    github: \"GitHub\",\n  };\n\n  const onSigninWithProvider = (provider) => {\n    setPending(provider);\n    auth\n      .signinWithProvider(provider)\n      .then((user) => {\n        localStorage.setItem(\"lastUsedAuthProvider\", provider);\n        props.onAuth(user);\n      })\n      .catch((error) => {\n        props.onError(error.message);\n      })\n      .finally(() => {\n        setPending(null);\n      });\n  };\n\n  // Get value of last used auth provider\n  useEffect(() => {\n    if (props.showLastUsed) {\n      const lastUsed = window.localStorage.getItem(\"lastUsedAuthProvider\");\n      if (lastUsed) {\n        setLastUsed(lastUsed);\n      }\n    }\n  }, [props.showLastUsed]);\n\n  return (\n    <>\n      {props.providers.map((provider) => (\n        <Button\n          variant=\"light\"\n          size={props.inputSize}\n          block={true}\n          onClick={() => {\n            onSigninWithProvider(provider);\n          }}\n          className=\"position-relative\"\n          key={provider}\n        >\n          <div className=\"AuthSocial__icon\">\n            <img\n              src={`https://uploads.divjoy.com/icon-${provider}.svg`}\n              alt={providerDisplayNames[provider]}\n            />\n          </div>\n\n          {pending !== provider && (\n            <span>\n              {props.buttonText} with {providerDisplayNames[provider]}\n            </span>\n          )}\n\n          {pending === provider && (\n            <Spinner\n              animation=\"border\"\n              size=\"sm\"\n              role=\"status\"\n              aria-hidden={true}\n              className=\"align-baseline text-primary\"\n            >\n              <span className=\"sr-only\">Loading...</span>\n            </Spinner>\n          )}\n\n          {provider === lastUsed && (\n            <Badge\n              variant=\"warning\"\n              className=\"position-absolute font-weight-normal\"\n              style={{\n                top: \"-6px\",\n                right: \"-6px\",\n                opacity: 0.7,\n              }}\n            >\n              Last used\n            </Badge>\n          )}\n        </Button>\n      ))}\n    </>\n  );\n}\n\nexport default AuthSocial;\n"]},"metadata":{},"sourceType":"module"}